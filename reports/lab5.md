# Введение
В данной лабораторной работе предлагалось 
* Вспомнить Unit-тесты на примере библиотеки biblib (попутно изучив ее функционал;
* Изучить основные возможности RecyclerView.

# Задание №1

В данном задании требовалось написать Android-тесты для самодельного приложения при помощи
фреймворка Espresso. Само приложение содержит кнопку, которая меняет свое текстовое содержание при
нажатии на нее, и текстового поля. В тесте требовалось проверить сохраняют ли оба View свое
состояние, или нет.

При помощи `ActivityScenarioRule` в Espresso-тестах можно задавать положение экрана. При помощи
метода `onView` происходит обращение к определенному layout-элементу (в данном случае обращались по
`id` элемента, но можно, например, и по значению аттрибута `text`). При помощи метода `perform`
можно осуществлять определенные действия (например `click` или `typeText`). Методом `check`
происходит проверка определенных параметров элемента.

Написанный тест делает с приложением следущее:

1. Кликает на кнопку;
2. Проверяет, изменилось ли ее содержимое
3. Вводит текст в поле;
4. Поворачивает экран (переход в Landscape);
5. Проверяет, что содержимое кнопки такое же, как было до клика на нее;
6. Проверяет, что текстовое поле все еще содержит набранный в него текст.

Честно говоря, я заранее подобрал такую последовательность действий, т.к. знал, что текст кнопки
сбросится, а текст, набранный в поле EditText – нет. Происходит это благодаря `savedInstanceState`
на входе методу `onCreate` в MainActivity. Сохранение View в `savedInstanceState` можно отключить
(`android:saveEnabled`).

# Задание №2

В данном задании нужно для любой реализации задания из 3 лабораторной работы (в моем случае  задача
3) составить Espresso-тесты.

В результате были составлены следующие тесты:

1. `testTransition123` (тест переходов между Activity 1, 2, 3 при помощи кнопок, проверяя у
каждого Activity факт существования layout, в котором расположены кнопки, и toolbar);
2. `testTransitionToAbout` (тест переходов из всех 3 Activity в ActivityAbout аналогично предыдущему
 тесту);
3. `testBackStack` (тест корректности логики, по которой осуществляется навигация в backstack,
с помощью навигации "назад" из разных исходных состояний).

# Вывод

В данной работе ознакомился с очень полезным в плане составления UI-тестов android-приложения
Espresso, который является удобным инструментом, заменяющий ручную проверку правильности работы UI.
Благодаря методу `onView`, в параметр которого подается `Matcher`, соответствующий признаку нужного
`View` (в моем случае поиск был по id), я мог создавать `ViewInteraction`, предоставляюший
весьма большой функционал для тестирования (`matches` -- проверка соответствия некому признаку,
`perform` -- имитирует некоторое действие пользователя).

За имитацию действий с определенным `View` производится при помощи различных классов `ViewAction`.
Собственно благодаря различным реализациям этого класса можно воспроизводить нажатия на
элементы `View`, нажатия кнопки назад и т. п.

С помощью `ViewAction` можно симитировать почти любые действия пользователя (если нету готового
действия, то можно сделать свой `ViewAction`), что экономит время, заменяя ручную проверку.

Кроме того, в 1 задании я понял, что в `onSaveInstanceState` могут сохраняться состояния не только
Activity но и View.
